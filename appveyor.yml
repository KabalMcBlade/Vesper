version: 1.0.{build}
image: Visual Studio 2022
platform: x64
environment:
  VULKAN_SDK_VERSION: '1.3.261.1'
  VULKAN_SDK: C:\VulkanSDK\$(VULKAN_SDK_VERSION)
  VK_SDK_PATH: C:\VulkanSDK\$(VULKAN_SDK_VERSION)

install:
- cmd: >-
    appveyor DownloadFile https://vulkan.lunarg.com/sdk/download/$(VULKAN_SDK_VERSION)/windows/VulkanSDK-$(VULKAN_SDK_VERSION)-Installer.exe -FileName vulkan.exe
    vulkan.exe /S
    if not exist C:\tools\vcpkg (
      git clone https://github.com/microsoft/vcpkg.git C:\tools\vcpkg
      C:\tools\vcpkg\bootstrap-vcpkg.bat
    ) else (
      cd C:\tools\vcpkg
      git pull
      C:\tools\vcpkg\bootstrap-vcpkg.bat
    )
    C:\tools\vcpkg\vcpkg.exe integrate install
    C:\tools\vcpkg\vcpkg.exe install glfw3 glm

build:
  project: Vesper.sln
  verbosity: minimal
